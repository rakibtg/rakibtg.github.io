(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,n){e.exports=n(51)},32:function(e,t,n){},34:function(e,t,n){},44:function(e,t){},46:function(e,t){},51:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(18),o=n.n(r),s=(n(32),n(24)),c=n(19),l=n(20),u=n(21),h=n(25),d=n(22),g=n(26),m=(n(34),n(23)),b=n.n(m),y=localStorage.rxjs,f=new b.a({initiator:"#1"===window.location.hash,trickle:!1});f.on("error",function(e){return console.log(e)});var p=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(h.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={outgoing:"",incoming:"",showChat:!1,beingWritten:"",chats:[],keys:!1,isRx:!1},n.chatBody=i.a.createRef(),n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;f.on("signal",function(t){e.setState({outgoing:JSON.stringify(t)})}),f.on("connect",function(){f.send(JSON.stringify({msg:"You are now connected! \ud83c\udf89",owner:null})),e.setState({showChat:!0})}),f.on("data",function(t){var n=JSON.parse(new TextDecoder("utf-8").decode(t));n.type?"keyboard"===n.type&&!0===e.state.isRx&&e.setState({keys:n.msg}):e.appendMsg({msg:n.msg,owner:n.owner})}),y&&"rxjs_dev-TypeScript2.40.33-dev-build"===y&&this.setState({keys:"Type should start now...",isRx:!0})}},{key:"handleChange",value:function(e){var t=this,n=e.target.name;this.setState(Object(c.a)({},n,e.target.value),function(){"beingWritten"===n&&t.handleKeyboardType(t.state.beingWritten)})}},{key:"handleSubmitConnection",value:function(e){e.preventDefault(),f.signal(JSON.parse(this.state.incoming))}},{key:"renderP2P",value:function(){return i.a.createElement("div",{className:"render-p2p"},i.a.createElement("h1",null,"\ud83d\udd25 Secret Chat \ud83d\udde3"),i.a.createElement("br",null),i.a.createElement("br",null),i.a.createElement("form",{onSubmit:this.handleSubmitConnection.bind(this)},i.a.createElement("strong",null,"Incoming:"),i.a.createElement("br",null),i.a.createElement("textarea",{id:"incoming",rows:"8",cols:"50",name:"incoming",value:this.state.incoming,onChange:this.handleChange.bind(this)}),i.a.createElement("br",null),i.a.createElement("button",null,"Connect")),i.a.createElement("br",null),i.a.createElement("strong",null,"Outgoing:"),i.a.createElement("br",null),i.a.createElement("textarea",{id:"incoming",rows:"8",cols:"50",name:"outgoing",value:this.state.outgoing,onChange:this.handleChange.bind(this)}))}},{key:"appendMsg",value:function(e){var t=this;this.setState({chats:Object(s.a)(this.state.chats).concat([e])},function(){setTimeout(function(){t.chatBody.current.scrollTop=t.chatBody.current.scrollHeight},2e3)})}},{key:"handleMsg",value:function(e){e.preventDefault(),this.appendMsg({msg:this.state.beingWritten,owner:!0}),f.send(JSON.stringify({msg:this.state.beingWritten,owner:!1})),this.setState({beingWritten:""})}},{key:"renderMsgs",value:function(){return this.state.chats.map(function(e,t){return i.a.createElement("div",{key:t,className:e.owner?"msg-bubble bubble-owner":"msg-bubble bubble-recipient"},e.msg)})}},{key:"renderChat",value:function(){return i.a.createElement("div",{className:"chat-wrapper"},i.a.createElement("div",{className:"chat-body",ref:this.chatBody},this.renderMsgs()),i.a.createElement("div",{className:"keys"},this.state.keys),i.a.createElement("div",{className:"chat-input"},i.a.createElement("form",{onSubmit:this.handleMsg.bind(this)},i.a.createElement("input",{className:"chat-box",name:"beingWritten",value:this.state.beingWritten,onChange:this.handleChange.bind(this),placeholder:"Hit enter to send your reply..."}))))}},{key:"handleKeyboardType",value:function(e){!1===this.state.isRx&&f.send(JSON.stringify({msg:e,type:"keyboard"}))}},{key:"render",value:function(){return this.state.showChat?this.renderChat():this.renderP2P()}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(p,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,2,1]]]);
//# sourceMappingURL=main.8da51348.chunk.js.map